# دليل الاختبار - Tabibi

## سيناريوهات الاختبار الأساسية

### 1. تسجيل وتسجيل الدخول

#### اختبار تسجيل مريض جديد
- [ ] الدخول إلى `/auth/patient/register`
- [ ] إدخال رقم الهاتف (صيغة جزائرية)
- [ ] الضغط على "التالي"
- [ ] إدخال اسم المريض والولاية والبلدية
- [ ] الضغط على "التسجيل"
- [ ] التحقق من رسالة النجاح
- [ ] الانتقال إلى صفحة تسجيل الدخول

#### اختبار تسجيل طبيب جديد
- [ ] الدخول إلى `/auth/professional/register`
- [ ] إدخال البريد والكلمة السرية
- [ ] إدخال البيانات المهنية
- [ ] اختيار التخصص والولاية
- [ ] التحقق من ترخيص الممارسة
- [ ] الضغط على "التسجيل"

#### اختبار دخول المريض
- [ ] الدخول إلى `/auth/patient/login`
- [ ] إدخال رقم الهاتف
- [ ] الضغط على "إرسال OTP"
- [ ] الانتظار لاستقبال الكود
- [ ] إدخال الكود
- [ ] التحقق من الانتقال إلى Dashboard

#### اختبار دخول الطبيب
- [ ] الدخول إلى `/auth/professional/login`
- [ ] إدخال البريد والكلمة السرية
- [ ] التحقق من الانتقال إلى Doctor Dashboard

### 2. لوحة تحكم المريض

#### عرض البيانات
- [ ] التحقق من ظهور المواعيد القادمة
- [ ] التحقق من ظهور الوصفات الطبية
- [ ] التحقق من ظهور نتائج المختبر
- [ ] التحقق من ظهور السجل الصحي

#### التنقل بين الأقسام
- [ ] النقر على "المواعيد" → Appointments
- [ ] النقر على "البحث عن أطباء" → SearchDoctors
- [ ] النقر على "الوصفات" → Prescriptions
- [ ] النقر على "نتائج المختبر" → LabResults
- [ ] النقر على "ضغط الدم" → BloodPressureDetail
- [ ] النقر على "سكر الدم" → BloodSugarDetail

#### رسوم البيانات
- [ ] التحقق من رسم ضغط الدم
- [ ] التحقق من رسم سكر الدم
- [ ] التحقق من تحديث البيانات

### 3. البحث عن الأطباء والحجز

#### البحث بالتخصص
- [ ] الدخول إلى `/patient/search`
- [ ] إدخال تخصص (مثل: طبيب عام)
- [ ] الضغط على "بحث"
- [ ] التحقق من ظهور النتائج

#### البحث بالموقع
- [ ] البحث باختيار الولاية
- [ ] البحث باختيار البلدية
- [ ] التحقق من ظهور النتائج

#### عرض تفاصيل الطبيب
- [ ] النقر على طبيب من النتائج
- [ ] التحقق من ظهور التخصص والخبرة
- [ ] التحقق من ظهور التقييم
- [ ] الضغط على "احجز موعد"

### 4. لوحة تحكم الطبيب

#### عرض المواعيد
- [ ] التحقق من ظهور المواعيد القادمة
- [ ] التحقق من ظهور المواعيد المكتملة
- [ ] التحقق من عدد المرضى

#### إدارة المواعيد
- [ ] النقر على موعد
- [ ] التحقق من بيانات المريض
- [ ] تحديث حالة الموعد

### 5. تدفق البيانات

#### تحديث البيانات تلقائياً
- [ ] إضافة بيانات صحية جديدة
- [ ] التحقق من ظهورها في Dashboard
- [ ] التحقق من عدم الحاجة لتحديث اليدوي

#### حفظ المواعيد الجديدة
- [ ] حجز موعد جديد
- [ ] التحقق من ظهوره في قائمة المواعيد
- [ ] التحقق من ظهوره في dashboard الطبيب

### 6. تسجيل الخروج

#### من لوحة المريض
- [ ] الضغط على "تسجيل خروج"
- [ ] التحقق من الانتقال إلى الصفحة الرئيسية
- [ ] التحقق من عدم الوصول إلى `/patient/dashboard`

#### من لوحة الطبيب
- [ ] الضغط على "تسجيل خروج"
- [ ] التحقق من الانتقال إلى الصفحة الرئيسية
- [ ] التحقق من عدم الوصول إلى `/doctor/dashboard`

## اختبارات الأداء

- [ ] قياس سرعة تحميل Dashboard
- [ ] قياس سرعة البحث عن الأطباء
- [ ] التحقق من عدم تأخر الصفحة عند جلب البيانات
- [ ] اختبار عدد الطلبات المتزامنة

## اختبارات الأمان

- [ ] التحقق من عدم الوصول بدون مصادقة
- [ ] التحقق من عدم رؤية بيانات المريض الآخر
- [ ] التحقق من حماية المسارات المحمية
- [ ] اختبار CSRF protection

## نقاط التحقق الحرجة

1. **المصادقة** - المستخدم يدخل بشكل صحيح
2. **جلب البيانات** - البيانات تظهر من قاعدة البيانات
3. **التوجيه** - جميع الصفحات يمكن الوصول إليها
4. **المنطق** - تطابق البيانات بين جميع الصفحات
5. **الأداء** - لا توجد تأخيرات غير متوقعة

## الأخطاء الشائعة المتوقعة

| الخطأ | السبب المحتمل | الحل |
|------|------------|-----|
| فشل تسجيل الدخول | خطأ في قاعدة البيانات | تحقق من اتصال Supabase |
| عدم ظهور البيانات | عدم جلب البيانات من السيرفر | افتح أدوات المطور وتحقق من الأخطاء |
| صفحة بيضاء | خطأ في المكون | افتح الكونسول وتحقق من الأخطاء |
| بطء الصفحة | استدعاءات كثيرة | تحقق من عدد الاستدعاءات |
